#!/bin/bash

##### (Cosmetic) Colour output
RED="\033[01;31m"      # Issues/Errors
GREEN="\033[01;32m"    # Success
YELLOW="\033[01;33m"   # Warnings/Information
BLUE="\033[01;34m"     # Heading
BOLD="\033[01;01m"     # Highlight
RESET="\033[00m"       # Normal

echo "[!] If you haven't, change your root password immediately!"
echo "[*] Sleeping 10 seconds to allow for you to stop this and go do it now!"
sleep 10

echo "[+] Updating base image"
apt-get update 
apt-get -y full-upgrade

echo "[+] Installing extended kali toolset"
apt-get install -y kali-linux-all

echo "[+] Linking staged nmap"
ln -sn /opt/pentest-utils/nmap-staged.sh /usr/bin/nmap-staged

echo "[+] Linking staged unicornscan"
ln -sn /opt/pentest-utils/unicorn-staged.sh /usr/bin/unicorn-staged

echo "[+] Linking staged dirb"
ln -sn /opt/pentest-utils/dirb-staged.sh /usr/bin/dirb-staged

echo "[+] Linking smb enumeration script"
ln -sn /opt/pentest-utils/smb-enumerator.sh /usr/bin/smb-enumerator

echo "[+] Linking pattern create and pattern offset into /usr/bin"
ln -sn /usr/share/metasploit-framework/tools/pattern_create.rb /usr/bin/pattern_create
ln -sn /usr/share/metasploit-framework/tools/pattern_offset.rb /usr/bin/pattern_offset

echo "[+] Cloning gotree"
cd /opt
git clone https://github.com/kkirsche/gotree.git

echo "[+] Cloning Linux Exploit Suggester"
cd /opt
git clone https://github.com/PenturaLabs/Linux_Exploit_Suggester

echo "[+] Cloning Windows Exploit Suggester"
cd /opt
git clone https://github.com/GDSSecurity/Windows-Exploit-Suggester.git

echo "[+] Cloning Powershell Empire"
cd /opt/
git clone 'https://github.com/EmpireProject/Empire'
cd Empire
./setup/install.sh

echo "[+] Downloading various windows binaries"
mkdir /opt/windows-extras
cd /opt/windows-extras
wget http://www.tightvnc.com/download/1.3.10/tightvnc-1.3.10_x86.zip
wget https://download.sysinternals.com/files/PSTools.zip
wget https://download.sysinternals.com/files/AccessChk.zip
wget https://the.earth.li/~sgtatham/putty/latest/w32/putty.zip
wget https://the.earth.li/~sgtatham/putty/latest/w32/putty.zip.gpg
wget https://download.sysinternals.com/files/Procdump.zip

echo "[+] Installing IP / SIP calculators"
apt -y -qq install ipcalc sipcalc

echo "[+] Installing ASCII Cinema CLI recorder"
apt -y -qq install asciinema

echo "[+] Installing Shutter"
apt -y -qq install shutter

echo "[+] Installing PSMisc"
apt -y -qq install psmisc

echo "[+] Installing pipe viewer"
apt -y -qq install pv

echo "[+] Installing NCFTP"
apt -y -qq install ncftp

echo "[+] Installing ZIP utilities"
apt -y -qq install zip unzip

echo "[+] Install various VPN support"
for FILE in network-manager-openvpn network-manager-pptp network-manager-vpnc network-manager-openconnect network-manager-iodine; do
  apt -y -qq install "${FILE}"
done

echo "[+] Installing bridge-utils"
apt -y -qq install bridge-utils

echo "[+] Installing http-tunnel"
apt -y -qq install http-tunnel

echo "[+] Install MingW cross compiler"
for FILE in mingw-w64 binutils-mingw-w64 gcc-mingw-w64 cmake   mingw-w64-dev mingw-w64-tools   gcc-mingw-w64-i686 gcc-mingw-w64-x86-64   mingw32; do
  apt -y -qq install "${FILE}" 2>/dev/null
done

echo "[+] Installing cowsay"
apt -y -qq install cowsay

echo "[+] Removing unnecessary packages"
apt autoremove

echo "[+] Updating slocate DB"
updatedb
