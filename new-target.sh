#!/bin/bash

if [ -z $# -ne 2 ]; then
	echo '[!] Usage: new-target <target> <name>'
	exit 1
fi

tarip=$1
tarname=$2

tarip_oct1=$(${tarip} | cut -d '.' -f 1)
tarip_oct2=$(${tarip} | cut -d '.' -f 2)
tarip_oct3=$(${tarip} | cut -d '.' -f 3)
tarip_oct4=$(${tarip} | cut -d '.' -f 4)

tarfolder="${tarip_oct3}.${tarip_oct4}-${tarname}"

echo "Welcome! Give 'em hell!"
echo "[+] Creating folder for ${tarname} at ${tarip}."
echo "    [*] ${tarfolder}"
mkdir ${tarfolder}
pushd $(pwd)>/dev/null
cd 

echo "[+] Beginning staged unicornscan process"
mkdir 00-unicorn
pushd $(pwd)>/dev/null
cd 00-unicorn
unicorn-staged ${tarip}
popd>/dev/null

echo "[+] Beginning staged nmap process"
mkdir 01-nmap
pushd $(pwd)>/dev/null
cd 01-nmap
nmap-staged ${tarip}
popd>/dev/null

popd>/dev/null
echo "[*] Good luck! You've got this!"
